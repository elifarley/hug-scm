#!/usr/bin/env bash
set -euo pipefail

# Quick changes summary
test "${1:-}" = '-h' -o "${1:-}" = '--help' && {
  printf 'w changes: Quick summary of working changes\n' >&2
  printf 'Usage: hug w changes\n' >&2
  exit 1
}

if git diff --quiet; then
  printf 'âœ… No unstaged changes\n' >&2
else
  files=$(git diff --name-only | wc -l)
  insertions=$(git diff --numstat | awk '{sum += $1} END {print sum}')
  deletions=$(git diff --numstat | awk '{sum += $2} END {print sum}')
  printf 'ðŸ“ Working dir changes: %d files, +%d/-%d lines\n' "$files" "$insertions" "$deletions" >&2
fi

