[metadata]
description = "Mock data for git search commands"
generated_by = "generate_mocks.py"
repo_setup = "git/search-commits.sh"

[[scenario]]
name = "message_match"
description = "Search commit messages for 'fix'"
command = [
    "git",
    "log",
    "--format=%H|~|%h|~|%an|~|%ae|~|%cn|~|%ce|~|%aI|~|%ar|~|%cI|~|%cr|~|%T|~|%s|~|%B|~|%P|~|%D",
    "--grep={term}",
]
returncode = 0
output_file = "outputs/search_message_match.txt"
stderr = ""

[[scenario]]
name = "code_match"
description = "Search code changes for 'def calculate'"
command = [
    "git",
    "log",
    "--format=%H|~|%h|~|%an|~|%ae|~|%cn|~|%ce|~|%aI|~|%ar|~|%cI|~|%cr|~|%T|~|%s|~|%B|~|%P|~|%D",
    "-S{code}",
]
returncode = 0
output_file = "outputs/search_code_match.txt"
stderr = ""

[[scenario]]
name = "with_files"
description = "Search with file changes included"
command = [
    "git",
    "log",
    "--format=%H|~|%h|~|%an|~|%ae|~|%cn|~|%ce|~|%aI|~|%ar|~|%cI|~|%cr|~|%T|~|%s|~|%B|~|%P|~|%D",
    "--name-status",
    "--grep={term}",
]
returncode = 0
output_file = "outputs/search_with_files.txt"
stderr = ""

[[scenario]]
name = "no_match"
description = "Search with no results"
command = [
    "git",
    "log",
    "--format=%H|~|%h|~|%an|~|%ae|~|%cn|~|%ce|~|%aI|~|%ar|~|%cI|~|%cr|~|%T|~|%s|~|%B|~|%P|~|%D",
    "--grep={term}",
]
returncode = 0
output_file = "outputs/search_no_match.txt"
stderr = ""

[[scenario]]
name = "git_error"
description = "Git command error"
command = [
    "git",
    "log",
    "--format=%H|~|%h|~|%an|~|%ae|~|%cn|~|%ce|~|%aI|~|%ar|~|%cI|~|%cr|~|%T|~|%s|~|%B|~|%P|~|%D",
    "--invalid-flag",
]
returncode = 128
output_file = "outputs/search_git_error.txt"
stderr = "fatal: unrecognized argument: --invalid-flag\n"
